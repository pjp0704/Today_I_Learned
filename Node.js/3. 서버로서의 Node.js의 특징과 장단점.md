# Node.js의 장단점

이 파일에서는 노드를 서버로 사용할 때의 특성과 장단점을 서술한다.

## 기본적인 특징 및 장단점

노드는 기본적으로 싱글 스레드, 논 블로킹 모델을 사용한다. 노드 서버 또한 동일한 모델일 수밖에 없다. 따라서 노드 서버의 장단점은 결국 싱글 스레드, 논 블로킹 모델 자체의 장단점고 ㅏ크게 다르지 않다.

서버는 기본적으로 I/O 요청이 많이 발생하므로, I/O 처리에 강점을 보이는 노드를 서버로 사용하기에 좋다. 노드는 **논 블로킹 방식으로 코드를 작성했다는 가정 하에(중요!)** libuv 라이브러리를 사용하여 I/O 작업을 논 블로킹 작업으로 처리하므로, 스레드 하나가 많은 수의 I/O를 혼자서도 감당할 수 있다.

하지만 노드는 CPU 부하가 큰 작업에는 적합하지 않다. 이는 아까도 말했듯이, 우리가 작성한 코드는 모두 단일 스레드에서 처리되기 때문에 코드에서 CPU 연산을 많이 요구할 경우 스레드 하나가 감당하기 힘들기 때문이다.

### 그럼 어디에 노드를 사용해야 할까?

이러한 노드의 특성을 활용하려면 **개수는 많지만 크기는 작은 데이터를 실시간으로 주고받는 서비스에 노드를 사용하는 것이 적합**하다. 네트워크나 데이터베이스, 디스크 작업과 같은 I/O 작업에 특화되어 있기 때문이다. 실시간 채팅 애플리케이션, 주식 차트, JSON 데이터를 제공하는 API 서버 등에서 노드를 많이 사용한다.

Node.js 12 버전에서 워커 스레드 기능이 안정화되면서 멀티 스레드 작업을 할 수 있게 되었지만, 이렇게 작업하는 것은 싱글 스레드에 비해 어렵다. 특히 스레드가 작업을 나눠서 처리할 수 있게 직접 분배하는 것이 그렇다. 그리고 그렇게 프로그래밍하더라도 다른 언어에 비해 속도가 느리다.

따라서 멀티 스레드 기능이 존재하지만 이미지나 비디오 처리, 혹은 대규모 데이터 처리처럼 CPU를 많이 사용하는 작업을 윟나 서버로는 권장되지 않는다. 이런 분야에는 노드보다 적합한 다른 언어가 많다. 그럼에도 노드로 작업할 경우, AWS Lambda나 Google Cloud Functions 등에서 노드로 CPU를 많이 사용하는 작업을 처리하는 것을 지원하므로 고려해보면 좋다.

### 기타 장단점

싱글 스레드 방식이 프로그래밍하기 상대적으로 더 쉽지만, 싱글 스레드 방식이라면 에러로 인해 스레드가 멈추지 않도록 잘 관리하여야 한다. 에러를 제대로 처리하지 못하면 하나만 있는 스레드가 죽어버려서 서버 전체가 멈추기 때문이다.

노드에는 웹 서버가 내장되어 있어 다른 서버와 다르게 아파치, nginx, IIS등의 별도 웹 서버의 설치가 필요하지 않다. 또한 Tomcat 등의 웹 애플리케이션 서버(WAS)를 추가로 설치할 필요도 없다. 물론 나중에 서버 규모가 커지면 결국 nginx 등의 웹 서버를 노드 서버와 연결해야 한다.

노드의 가장 큰 장점 중 하나는 자바스크립트를 사용한다는 것이다. 이는 프론트엔드 / 백엔드를 전부 하나의 언어로 개발할 수 있다는 것이고, 이로 인해 생산이 획기적으로 올라 생산성이 중요한 기업이 노드를 채택하는 이유가 되었다. 또한 자바스크립트를 사용하기에 JSON 형식을 쉽게 처리할 수 있다는 장점도 있다.

물론 노드는 생산성이 뛰어나지만, Go처럼 비동기에 강점을 보이는 언어나 nginx처럼 정적 파일 제공 / 로드 밸런싱에 특화된 웹 서버에 비해서는 속도가 느리다. 그렇지만 극단적인 성능이 필요하지 않다면 이렇나 단점은 노드의 생산성으로 극복할 수 있다.

대부분의 경우 노드의 단점으로 안정성과 보안성이 검증되지 않았다는 부분을 들기도 하는데, 이는 사실 적합하지 않은 부분이다. 규모가 큰 곳의 예시를 들자면 NASA, 에어비엔비, 우버, 넷플릭스, 링크드인 등에서 노드를 사용하고 있으며, 페이팔, 월마트, 이베이처럼 결제 시스템을 사용하는 대기업들도 노드로 서비스를 충분히 잘 운영하고 있다.
