# AWS EC2에 리눅스 구축하기

아마존 EC2는 가상 컴퓨터 환경을 제공하는 서비스로, 리눅스 등의 운영체제를 올려 컴퓨터처럼 사용할 수 있다.

## EC2 인스턴스 생성

- EC2 콘솔 접속 후 인스턴스 시작
  - EC2 콘솔에 접속한 뒤 인스턴스 시작 버튼을 눌러 새로운 EC2 인스턴스를 생성할 수 있다.
- 운영체제 선택
- 인스턴스 유형 선택
  - 인스턴스 유형은 가상 머신의 CPU와 램 용량 등을 선택하는 것이며, 프리 티어 사용 가능이라는 표시가 없는 유형을 선택할 경우 과금될 수 있으니 주의한다.
- 인스턴스 구성
  - 인스턴스의 세부 설정을 적용할 수 있다.
- 스토리지 추가
  - 인스턴스에 연결될 스토리지를 선택하거나 새로 만들 수 있다. 프리 티어는 최대 30GB의 SSD 또는 HDD를 사용할 수 있다.(변경될 수 있음)
- 보안 그룹 구성
- 검토
  - 설정을 한 번에 확인할 수 있으며, 시작하기를 누르면 ssh 키 페어를 생성하여 다운로드받을 수 있다. 해당 키 페어를 이용하여 방금 만든 EC2 인스턴스에 ssh를 이용해 접속할 수 있다.

이렇게 만든 EC2 인스턴스에 접속하기 위해 왼쪽 기능 리스트에서 탄력적 IP를 설정해 주어야 한다. 탄력적 IP 주소 할당을 누르면 네트워크 경계 그룹을 선택할 수 있고, 오른쪽 아래의 할당을 누르면 새 IP 주소가 할당된다. 이후 해당 아이피를 누르면 탄력적 IP 주소 연결 창이 뜨는데, 여기서 해당 IP를 연결할 인스턴스를 선택해 주면 된다.

## EC2 인스턴스에 접속하기

우선 EC2 인스턴스를 생성할 때 다운로드 받은 프라이빗 키의 권한을 설정해 주어야 한다.

```bash
chmod 400 my-private-key.pem
```

프라이빗 키 파일의 권한 설정이 되었다면 ssh로 해당 키 파일을 이용해 접속할 수 있다.

(우분투 인스턴스 기준)

```bash
ssh -i my-private-key.pem ubuntu@(인스턴스 아이피 주소)
```

접속하면 호스트 신뢰성 경고가 나오며 ECDSA 키를 보여 주는데, yes를 입력해 접속하면 우분투에 ssh로 연결된 터미널이 나온다.

윈도우에서 접속하기 위해서는 putty와 puttygen을 다운로드 받아야 한다. puttygen에서 다운로드 받았던 프라이빗 키 파일을 RSA 키로 변환해 주어야 하며, 변환한 키를 다시 ppk 확장자로 저장하여야 한다. 이후 putty에서 방금 생성한 ppk 키를 이용해 접속하면 된다.
