# 도커 기본 명령어

## 이미지 명령

- docker search \[이미지 이름\]
  - Docker Hub에 업로드되어 있는 이미지를 검색하는 명령어
  - 도커 이미지는 이미지명\[:태그\]로 이루어짐
    - 태그는 일반적으로 버전 정보를 의미함
    - 이미지명에 태그를 붙이지 않으면 가장 최신 버전의 이미지를 의미하며 다운로드 받은 이미지의 태그명은 latest가 됨
    - 태그를 붙이지 않아도 되지만 기존 버전과 구별을 위해 이미지명:latest로 다운로드하는 경우가 많음
    - 특정 이미지의 태그 목록을 볼 수 있는 공식적인 명령은 없음
  - 특정 프로그램이나 운영체제 이름으로 검색하면 리스트를 볼 수 있음
    - 이 중 검색한 운영체제나 프로그램 명만 있는 것이 대부분 공식 이미지임
    - 리스트에 OFFICIAL 항목이 \[OK\]로 표시되어 있으면 공식 이미지라고 보면 됨
    - 이미지명에 /(슬래시)가 붙은 경우, 앞단의 문자열이 Docker Hub에 해당 이미지를 업로드한 사용자명이라고 보면 됨, 뒤의 문자열은 이미지명
  - \-\-limit 옵션을 이용하여 검색할 때 개수를 제한할 수 있음
- docker pull \[이미지 이름\]:\[태그\]
  - 해당 이미지를 다운로드하는 명령어
  - 태그를 붙여 특정 버전을 다운로드 할 수 있음, 안 붙이면 자동으로 latest 버전 다운로드
  - 이미지를 다운로드하는 명령이므로 구분을 위해서 `docker image pull`로 사용하기도 함
- docker images
  - 다운로드되어 있는 이미지들의 목록을 표시하는 명령어
  - docker image ls 명령으로도 같은 동작 수행 가능
  - \-q 옵션을 이용해 이미지 아이디만 출력 가능, 다른 명령과 조합해 사용할 때 유용함
- docker rmi \[이미지 ID or 이미지 Repository 이름\]
  - 다운로드받은 이미지를 삭제하는 명령어
  - docker image rm 명령으로도 같은 동작 수행 가능
  - 이미지 ID가 겹치지 않는 선에서 ID의 앞부분 일부만 적어도 삭제 가능

## 컨테이너 명령

각 이미지는 컨테이너로 만들어 주어야 실행이 가능하며, 이미지와 컨테이너는 따로 관리해야 한다. 컨테이너 생성 시 이름이 자동으로 부여되지만, 이름을 직접 지정할 수도 있다.

- docker create \[이미지 이름\]:\[태그\]
  - 컨테이너를 생성하는 명령어
  - \-\-name 옵션을 이용하여 컨테이너 이름을 지정할 수 있음, 지정하지 않을 경우 랜덤한 이름 부여
- docker ps
  - 현재 실행 중인 컨테이너를 확인하는 명령어
  - \-a 옵션을 붙여 실행 중이지 않은 컨테이너를 포함한 전체 컨테이너 확인 가능
  - \-q 옵션을 붙여 컨테이너 아이디만 출력 가능
- docker rm \[컨테이너 이름 or 컨테이너 아이디\]
  - **이미지 이름**이 아니라 **컨테이너 이름**임에 유의
- docker start \[컨테이너 이름 or 컨테이너 아이디\]
  - 컨테이너를 실행하는 명령어
    > Docker Hub에서 Ubuntu 이미지를 다운받고 해당 이미지를 컨테이너로 만들어 실행하면 실행되자마자 꺼진다. 이는 Docker가 컨테이너를 하나의 응용 프로그램으로 다루고 있기 때문인데, 운영체제를 켰다 껐다 하는 것이 아닌, 운영체제 상에서 실행하는 응용 프로그램을 포함해 하나의 프로그램을 실행하고 중지하는 것으로 다루고 있으며, 컨테이너에서 실행하게끔 설정되어 있는 응용 프로그램의 실행이 끝나면 해당 컨테이너는 자동으로 중지되기 때문이다.
- docker inspect \[이미지 이름\]
  - 해당 이미지의 세부 사항을 알려주는 명령어
    > ubuntu 이미지의 명령어를 보면 /bin/bash인데, bash는 터미널을 동해 키보드 입력을 표준 입력(STDIN)으로 받을 수 있는 상태이어야 대기 상태로 계속 실핼될 수 있으며, 그렇지 않다면 입력을 받을 수 없기 때문에 종료됨. 따라서 별도 터미널 및 표준 입력 연결 설정 없이 실행 시 바로 종료되어 컨테이너도 종료되는 것
- docker run \[옵션\] \[이미지 이름\]
  - 주요 옵션
    - \-i: 컨테이너 입력(STDIN)을 열어두는 옵션(주로 \-it로 \-i 옵션과 \-t 옵션을 함께 사용함)
    - \-t: 가상 터미널(tty)을 할당하는 옵션
    - \-\-name: 컨테이너 이름을 설정하는 옵션
    - \-d: 컨테이너를 백그라운드에서 실행하는 옵션
    - \-\-rm: 컨테이너 종료 시 컨테이너를 자동으로 삭제하는 옵션
    - \-p: 호스트와 컨테이너 포트를 연결하는 옵션
    - \-v: 호스트와 컨테이너 디렉토리를 연결하는 옵션
- docker attach \[컨테이너 이름 or 컨테이너 아이디\]
  - 백그라운드에서 실행 중인 컨테이너에 연결하는 명령어
